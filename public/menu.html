<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full Menu - Delicute</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .menu-card {
      transition: transform 0.3s ease-in-out;
    }
    .menu-card:hover {
      transform: scale(1.05);
    }
    .toast {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      min-width: 200px;
      padding: 1rem;
      border-radius: 0.5rem;
      color: white;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.3s, transform 0.3s;
    }
    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }
    .toast.error {
      background-color: #ef4444;
    }
    @media (max-width: 640px) {
      .menu-card {
        margin-bottom: 1rem;
      }
      .toast {
        right: 0.5rem;
        left: 0.5rem;
        min-width: auto;
      }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
  </style>
</head>
<body class="font-sans text-gray-800 bg-gray-100">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-50">
    <nav class="container mx-auto px-4 py-4 flex flex-col sm:flex-row items-center justify-between">
      <div class="flex items-center mb-4 sm:mb-0">
        <img src="https://i.postimg.cc/zv19J0xv/Zbhz-Fq-T-Imgur.jpg" alt="Delicute Logo" class="h-12 mr-4" loading="lazy">
        <div>
          <h1 class="text-2xl font-bold text-orange-600">Delicute</h1>
          <p class="text-sm text-gray-600">Every Bite Tells a Story</p>
        </div>
      </div>
      <div class="nav-links flex items-center gap-4 sm:gap-6">
        <a href="index.html#home" class="text-gray-600 hover:text-orange-600 transition">Home</a>
        <a href="index.html#menu" class="text-gray-600 hover:text-orange-600 transition">Menu</a>
        <a href="index.html#about" class="text-gray-600 hover:text-orange-600 transition">About</a>
        <a href="index.html#contact" class="text-gray-600 hover:text-orange-600 transition">Contact</a>
        <a href="index.html#home" id="loginBtn" class="text-gray-600 hover:text-orange-600 transition">Login</a>
        <a href="index.html#home" id="signupBtn" class="bg-orange-600 text-white px-4 py-2 rounded-full hover:bg-orange-700 transition">Sign Up</a>
      </div>
    </nav>
  </header>

  <!-- Full Menu Section -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12 animate-fade-in">Our Full Menu</h2>
      <div class="flex flex-col sm:flex-row justify-between mb-8 gap-4">
        <input type="text" id="searchMenu" class="w-full sm:w-1/3 p-3 border rounded-lg" placeholder="Search menu...">
        <select id="categoryFilter" class="w-full sm:w-auto p-3 border rounded-lg">
          <option value="">All Categories</option>
          <option value="Mocktails">Mocktails</option>
          <option value="Juices">Juices</option>
          <option value="Maggie">Maggie</option>
          <option value="Pasta">Pasta</option>
          <option value="Shakes">Shakes</option>
          <option value="Waffles">Waffles</option>
          <option value="Extra Toppings">Extra Toppings</option>
          <option value="French Fries">French Fries</option>
          <option value="Desserts">Desserts</option>
          <option value="Veg Pizza">Veg Pizza</option>
          <option value="Non-Veg Pizza">Non-Veg Pizza</option>
        </select>
      </div>
      <div id="menuItems" class="space-y-12">
        <!-- Menu items loaded dynamically by category -->
      </div>
    </div>
  </section>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-8">
    <div class="container mx-auto px-4 text-center">
      <p class="mb-4">© 2025 Delicute. All rights reserved.</p>
      <div class="flex justify-center gap-4">
        <a href="#" class="text-gray-400 hover:text-white transition">Facebook</a>
        <a href="#" class="text-gray-400 hover:text-white transition">Instagram</a>
        <a href="#" class="text-gray-400 hover:text-white transition">Twitter</a>
      </div>
    </div>
  </footer>

  <script>
    // Configuration
    const CONFIG = {
      API_KEY: 'YOUR_API_KEY_HERE', // Replace with your backend API key
      API_BASE_URL: 'https://api.delicute.com' // Replace with your backend URL
    };

    // DOM Elements
    const DOM = {
      menuItems: document.getElementById('menuItems'),
      searchMenu: document.getElementById('searchMenu'),
      categoryFilter: document.getElementById('categoryFilter'),
      toastContainer: document.getElementById('toastContainer')
    };

    // Session Management
    const Session = {
      getUser: () => JSON.parse(sessionStorage.getItem('user')),
      getAdmin: () => JSON.parse(sessionStorage.getItem('admin')),
      isLoggedIn: () => !!Session.getUser(),
      isAdmin: () => !!Session.getAdmin()
    };

    // Toast Notifications
    const Toast = {
      show(message, type = 'error') {
        const toast = document.createElement('div');
        toast.className = `toast ${type} show`;
        toast.textContent = message;
        DOM.toastContainer.appendChild(toast);
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }
    };

    // API Client
    const API = {
      async request(endpoint, method) {
        try {
          const response = await fetch(`${CONFIG.API_BASE_URL}/${endpoint}`, {
            method,
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${CONFIG.API_KEY}`
            }
          });
          if (!response.ok) throw new Error(`HTTP ${response.status}: ${await response.text()}`);
          return await response.json();
        } catch (error) {
          Toast.show(`Error: ${error.message}`, 'error');
          console.error('API Error:', error);
          return null;
        }
      },
      getMenu: () => API.request('menu', 'GET')
    };

    // UI Management
    const UI = {
      redirectIfLoggedIn() {
        if (Session.isAdmin()) {
          console.log('Admin logged in, redirecting to admindashboard.html');
          window.location.assign('admindashboard.html');
        } else if (Session.isLoggedIn()) {
          console.log('User logged in, redirecting to userdashboard.html');
          window.location.assign('userdashboard.html');
        }
      },
      async renderMenu() {
        const menuData = await API.getMenu();
        if (!menuData?.items) {
          DOM.menuItems.innerHTML = '<p class="text-center text-gray-600">Failed to load menu. Please try again later.</p>';
          Toast.show('Failed to load menu', 'error');
          return;
        }
        const categories = [
          'Mocktails', 'Juices', 'Maggie', 'Pasta', 'Shakes', 'Waffles',
          'Extra Toppings', 'French Fries', 'Desserts', 'Veg Pizza', 'Non-Veg Pizza'
        ];
        const groupedItems = categories.reduce((acc, cat) => {
          acc[cat] = menuData.items.filter(item => item.category === cat);
          return acc;
        }, {});
        DOM.menuItems.innerHTML = categories
          .filter(cat => groupedItems[cat]?.length > 0)
          .map(cat => `
            <div class="category-section">
              <h3 class="text-2xl font-semibold text-orange-600 mb-6">${cat}</h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                ${groupedItems[cat].map(item => `
                  <div class="menu-card bg-white rounded-lg shadow-lg overflow-hidden" data-category="${item.category}">
                    <img src="${item.image || 'https://images.unsplash.com/photo-1515003197210-e0cd71810b5f?auto=format&fit=crop&w=800&q=60'}" alt="${item.name}" class="w-full h-48 object-cover" loading="lazy">
                    <div class="p-6">
                      <h4 class="text-xl font-semibold mb-2">${item.name}</h4>
                      <p class="text-gray-600 mb-4">${item.description}</p>
                      <p class="text-orange-600 font-bold">₹${item.price.toFixed(2)}</p>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
          `).join('');
      },
      filterMenu() {
        const search = DOM.searchMenu.value.toLowerCase();
        const category = DOM.categoryFilter.value;
        const cards = DOM.menuItems.querySelectorAll('.menu-card');
        const sections = DOM.menuItems.querySelectorAll('.category-section');
        cards.forEach(card => {
          const name = card.querySelector('h4').textContent.toLowerCase();
          const cardCategory = card.dataset.category || '';
          const matchesSearch = name.includes(search);
          const matchesCategory = !category || cardCategory === category;
          card.style.display = matchesSearch && matchesCategory ? '' : 'none';
        });
        sections.forEach(section => {
          const visibleCards = section.querySelectorAll('.menu-card:not([style*="display: none"])');
          section.style.display = visibleCards.length > 0 ? '' : 'none';
        });
      }
    };

    // Smooth Scrolling
    const setupSmoothScrolling = () => {
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
          e.preventDefault();
          const target = document.querySelector(anchor.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
          } else {
            window.location.href = anchor.getAttribute('href');
          }
        });
      });
    };

    // Initialize
    const init = () => {
      console.log('Initializing menu page');
      UI.redirectIfLoggedIn();
      UI.renderMenu();
      setupSmoothScrolling();
      DOM.searchMenu.addEventListener('input', UI.filterMenu);
      DOM.categoryFilter.addEventListener('change', UI.filterMenu);
    };

    // Run Initialization
    init();
  </script>
</body>
</html>